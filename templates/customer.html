<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>é¡§å®¢æƒ…å ±</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='customer.css') }}">
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div id="menu-icon" class="menu-icon">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <h1>ğŸ“Š é¡§å®¢æƒ…å ±ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
    </header>

    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <nav id="sidebar" class="sidebar">
        <ul>
            <li><a href="/">çµŒå–¶æˆ¦ç•¥</a></li>
            <li><a href="search.html">é¡§å®¢IDæ¤œç´¢</a></li>
            <li><a href="stock.html">åœ¨åº«ãƒªã‚¹ãƒˆ</a></li>
        </ul>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main>
        <h2>é¡§å®¢æƒ…å ±: {{ customer_info['lastname'] }} {{ customer_info['firstname'] }}</h2>

        <p>ç”Ÿå¹´æœˆæ—¥: {{ customer_info['birthday'] }} | å¹´é½¢: {{ customer_info['age'] }} | æ€§åˆ¥: {{ 'ç”·æ€§' if customer_info['sex']==1 else 'å¥³æ€§' }}</p>
        <p>éƒ½é“åºœçœŒ: {{ customer_info['area'] }}</p>

        <div class="kpi">
            <strong>ç´¯è¨ˆæ³¨æ–‡å›æ•°:</strong> {{ total_orders }}<br>
            <strong>ç´¯è¨ˆè³¼å…¥é‡‘é¡:</strong> Â¥ {{ total_spent|int|format_currency }}<br>
            <strong>æœ€çµ‚è³¼å…¥æ—¥:</strong> {{ last_order.strftime('%Y/%m/%d') }}
        </div>

        <!-- ã‚°ãƒ©ãƒ•è¡¨ç¤º -->
        <div class="graph">
            {{ graph_html | safe }}
        </div>

        <!-- æ³¨æ–‡å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <h2>æ³¨æ–‡å±¥æ­´</h2>
        <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>æ³¨æ–‡æ—¥</th>
                    <th>æ³¨æ–‡ç•ªå·</th>
                    <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
                    <th>ã‚«ãƒ†ã‚´ãƒª</th>
                    <th>å˜ä¾¡</th>
                    <th>æ•°é‡</th>
                    <th>æ³¨æ–‡åˆè¨ˆ</th>
                </tr>
            </thead>
            <tbody>
            {% for order in cust_orders %}
                <tr>
                    <td>{{ order['orderdate'].strftime('%Y/%m/%d') }}</td>
                    <td>{{ order['orderno'] }}</td>
                    <td>{{ order['orderitem'] }}</td>
                    <td>{{ order['orderitemcate'] }}</td>
                    <td>Â¥ {{ order['itemprice']|int|format_currency }}</td>
                    <td>{{ order['ordernum'] }}</td>
                    <td>Â¥ {{ order['orderprice']|int|format_currency }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
    </main>

    <script src="{{ url_for('static', filename='customer.js') }}"></script>
</body>
</html>
