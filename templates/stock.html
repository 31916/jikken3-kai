<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>åœ¨åº«ãƒªã‚¹ã‚¯åˆ†æ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='humberger.css') }}">
</head>
<body>
  <header>
    <div id="menu-icon" class="menu-icon">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <h1 style="margin: 0; font-size: 1.5em;">ğŸ“Š é¡§å®¢ãƒ»åœ¨åº«åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
  </header>

  <nav id="sidebar" class="sidebar">
    <ul>
      <li><a href="/">çµŒå–¶æˆ¦ç•¥</a></li>
      <li><a href="search.html">é¡§å®¢IDæ¤œç´¢</a></li>
      <li><a href="stock.html">åœ¨åº«ãƒªã‚¹ãƒˆ</a></li>
    </ul>
  </nav>

  <h1>ğŸ“¦ åœ¨åº«ãƒªã‚¹ã‚¯åˆ†æ</h1>

  <!-- ä½åœ¨åº«5ä»¶ -->
  <h2>åœ¨åº«ç‡10%æœªæº€ã®å•†å“ï¼ˆä¸Šä½5ä»¶ï¼‰</h2>
  <table>
    <thead>
      <tr>
        <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>ç·æ³¨æ–‡æ•°</th>
        <th>ç¾åœ¨åœ¨åº«</th>
        <th>åœ¨åº«ç‡</th>
      </tr>
    </thead>
    <tbody>
      {% for i in low_stock_risk %}
      <tr class="low-stock">
        <td>{{ i.item }}</td>
        <td>{{ i.itemcate }}</td>
        <td>{{ i.total_ordered|format_currency }}</td>
        <td>{{ i.current_stock|format_currency }}</td>
        <td>{{ ('%.1f' % (i.stock_ratio * 100)) }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
  <h2>åœ¨åº«æ¤œç´¢</h2>
  <form method="get" action="/stock.html">
    <label>å•†å“å:
      <input type="text" name="item" value="{{ search_params.item }}">
    </label>

    <label>ã‚«ãƒ†ã‚´ãƒª:
      <select name="itemcate">
        <option value="">-- å…¨ã¦ --</option>
        {% for cat in categories %}
          <option value="{{ cat }}" {% if cat == search_params.itemcate %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
      </select>
    </label>

    <label>åœ¨åº«ç‡ min:
      <input type="number" name="min_stock_ratio" value="{{ search_params.min_stock_ratio }}" step="0.1"> %
    </label>

    <label>åœ¨åº«ç‡ max:
      <input type="number" name="max_stock_ratio" value="{{ search_params.max_stock_ratio }}" step="0.1"> %
    </label>

    <label>ç·æ³¨æ–‡æ•° min:
      <input type="number" name="min_ordered" value="{{ search_params.min_ordered }}">
    </label>

    <label>ç·æ³¨æ–‡æ•° max:
      <input type="number" name="max_ordered" value="{{ search_params.max_ordered }}">
    </label>

    <button type="submit">æ¤œç´¢</button>
  </form>

  <!-- æ¤œç´¢çµæœãƒ†ãƒ¼ãƒ–ãƒ« -->
  <h2>æ¤œç´¢çµæœ</h2>
  <table>
    <thead>
      <tr>
        <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>ç·æ³¨æ–‡æ•°</th>
        <th>ç¾åœ¨åœ¨åº«</th>
        <th>åœ¨åº«ç‡</th>
      </tr>
    </thead>
    <tbody>
      {% for i in item_analysis %}
      <tr>
        <td>{{ i.item }}</td>
        <td>{{ i.itemcate }}</td>
        <td>{{ i.total_ordered|format_currency }}</td>
        <td>{{ i.current_stock|format_currency }}</td>
        <td>{{ ('%.1f' % (i.stock_ratio * 100)) }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p><a href="/">â† æˆ»ã‚‹</a></p>

  <script src="{{ url_for('static', filename='humberger.js') }}"></script>
</body>
</html>
