<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>åœ¨åº«ãƒªã‚¹ã‚¯åˆ†æ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='humberger.css') }}">
  <style>
    form input, form button { margin: 4px; padding: 4px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    th { background-color: #eee; }
    .low-stock { background-color: #ffe6e6; }
  </style>
</head>
<body>
  <header>
    <div id="menu-icon" class="menu-icon">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <h1 style="margin: 0; font-size: 1.5em;">ğŸ“Š é¡§å®¢ãƒ»åœ¨åº«åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
  </header>

  <nav id="sidebar" class="sidebar">
    <ul>
      <li><a href="/">çµŒå–¶æˆ¦ç•¥</a></li>
      <li><a href="search.html">é¡§å®¢IDæ¤œç´¢</a></li>
      <li><a href="stock.html">åœ¨åº«ãƒªã‚¹ãƒˆ</a></li>
    </ul>
  </nav>

  <h1>ğŸ“¦ åœ¨åº«ãƒªã‚¹ã‚¯åˆ†æ</h1>

  <!-- ä½åœ¨åº«5ä»¶ -->
  <h2>åœ¨åº«ç‡10%æœªæº€ã®å•†å“ï¼ˆä¸Šä½5ä»¶ï¼‰</h2>
  <table>
    <thead>
      <tr>
        <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>ç·æ³¨æ–‡æ•°</th>
        <th>ç¾åœ¨åœ¨åº«</th>
        <th>åœ¨åº«ç‡</th>
      </tr>
    </thead>
    <tbody>
      {% for i in low_stock_risk %}
      <tr class="low-stock">
        <td>{{ i.item }}</td>
        <td>{{ i.itemcate }}</td>
        <td>{{ i.total_ordered|format_currency }}</td>
        <td>{{ i.current_stock|format_currency }}</td>
        <td>{{ ('%.1f' % (i.stock_ratio * 100)) }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
  <h2>å•†å“æ¤œç´¢</h2>
  <form method="get" action="{{ url_for('stock_page') }}">
    <input type="text" name="item" placeholder="å•†å“ã‚³ãƒ¼ãƒ‰" value="{{ search_params.item }}">
    <input type="text" name="itemcate" placeholder="ã‚«ãƒ†ã‚´ãƒª" value="{{ search_params.itemcate }}">
    <input type="number" step="0.1" name="min_stock_ratio" placeholder="æœ€å°åœ¨åº«ç‡(%)" value="{{ search_params.min_stock_ratio }}">
    <input type="number" step="0.1" name="max_stock_ratio" placeholder="æœ€å¤§åœ¨åº«ç‡(%)" value="{{ search_params.max_stock_ratio }}">
    <input type="number" name="min_ordered" placeholder="æœ€å°æ³¨æ–‡æ•°" value="{{ search_params.min_ordered }}">
    <input type="number" name="max_ordered" placeholder="æœ€å¤§æ³¨æ–‡æ•°" value="{{ search_params.max_ordered }}">
    <button type="submit">æ¤œç´¢</button>
    <button type="button" onclick="window.location='{{ url_for('stock_page') }}'">ãƒªã‚»ãƒƒãƒˆ</button>
  </form>

  <!-- æ¤œç´¢çµæœ / å…¨å•†å“åœ¨åº«ä¸€è¦§ -->
  <h2>å…¨å•†å“åœ¨åº«ä¸€è¦§ï¼ˆæ¤œç´¢çµæœï¼‰</h2>
  <table>
    <thead>
      <tr>
        <th>å•†å“ã‚³ãƒ¼ãƒ‰</th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>ç·æ³¨æ–‡æ•°</th>
        <th>ç¾åœ¨åœ¨åº«</th>
        <th>åœ¨åº«ç‡</th>
      </tr>
    </thead>
    <tbody>
      {% for i in item_analysis %}
      <tr>
        <td>{{ i.item }}</td>
        <td>{{ i.itemcate }}</td>
        <td>{{ i.total_ordered|format_currency }}</td>
        <td>{{ i.current_stock|format_currency }}</td>
        <td>{{ ('%.1f' % (i.stock_ratio * 100)) }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p><a href="/">â† æˆ»ã‚‹</a></p>
  <script src="{{ url_for('static', filename='humberger.js') }}"></script>
</body>
</html>
